import{h as g,r as f,a as y,w as m}from"./index.a364b306.js";import{u as h}from"./hooks.32207597.js";function p(a){return g.request({method:"get",url:"/category",params:a})}function C(){return g.request({method:"get",url:"/category/all"})}function v(a){return g.request({method:"post",url:"/category",data:a})}function w(a,s){return g.request({method:"patch",url:"/category/"+a,data:s})}function A(a){return g.request({method:"delete",url:"/category/"+a})}function x(a){return g.request({method:"post",url:"/category/batch",data:a})}function b(){const a=f({page:1,size:10,total:0}),s=y(!1);async function d(){let o,e,u;try{s.value=!0,o=(await p({offset:(a.page-1)*a.size,limit:a.size})).data}catch(r){e=!0,o=r.data,u=r.data.msg||r.statusText}finally{s.value=!1}return{data:o,error:e,msg:u}}async function l(o){let e,u,r;try{s.value=!0,e=(await v(o)).data}catch(t){u=!0,e=t.data,r=t.data.msg||t.statusText}finally{s.value=!1}return{data:e,error:u,msg:r}}async function n(o){let e,u,r;try{s.value=!0,e=(await w(o)).data}catch(t){u=!0,e=t.data,r=t.data.msg||t.statusText}finally{s.value=!1}return{data:e,error:u,msg:r}}async function c(o){let e,u,r;try{s.value=!0,e=(await A(o)).data}catch(t){u=!0,e=t.data,r=t.data.msg||t.statusText}finally{s.value=!1}return{data:e,error:u,msg:r}}async function i(o){let e,u,r;try{s.value=!0,e=(await x(o)).data}catch(t){u=!0,e=t.data,r=t.data.msg||t.statusText}finally{s.value=!1}return{data:e,error:u,msg:r}}return{loading:s,pagination:a,fetchPageCategory:d,addCategory:l,updateCategory:n,deleteCategory:c,batchDeleteCategory:i}}function z(){const a=y([]),s=h();m(async()=>{try{const{data:l,error:n,msg:c}=await d();if(n){s.show({title:"\u83B7\u53D6\u6570\u636E\u5931\u8D25",message:c});return}a.value=l}catch(l){console.log(l)}});async function d(){let l,n,c;try{l=(await C()).data}catch(i){n=!0,l=i.data,c=i.data.msg||i.statusText}finally{}return{data:l,error:n,msg:c}}return{categoryList:a,getAllCategories:d}}export{b as a,z as u};
