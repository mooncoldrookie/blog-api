var U=Object.defineProperty;var v=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var w=(o,s,t)=>s in o?U(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,p=(o,s)=>{for(var t in s||(s={}))y.call(s,t)&&w(o,t,s[t]);if(v)for(var t of v(s))b.call(s,t)&&w(o,t,s[t]);return o};import{r as S,a as x,h as k,c as j,b as e,s as d,ac as m,i as n,aj as g,aa as A,f as B,g as M,af as N,a7 as i,o as P}from"./index.a364b306.js";import{u as V}from"./hooks.32207597.js";import{t as C,i as D,a as E}from"./index.768229a8.js";function F(){const o={username:"",email:"",role:"user",password:""},s=S(p({},o)),t=V(),r=x(""),u=x(!1);function f(){Object.assign(s,o),r.value=""}function c(){if(u.value=!1,s.username===""){t.show({message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A"});return}if(!C(s.username)){t.show({message:"\u7528\u6237\u540D\u683C\u5F0F\u4E0D\u6B63\u786E"});return}if(s.email!==""&&!D(s.email)){t.show({message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"});return}if(s.password===""){t.show({message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"});return}if(!E(s.password)){t.show({message:"\u5BC6\u7801\u683C\u5F0F\u4E0D\u6B63\u786E"});return}if(r.value!==s.password){t.show({message:"\u786E\u8BA4\u5BC6\u7801\u4E0D\u4E00\u81F4"});return}u.value=!0}return{formState:s,confirmPassword:r,checkForm:c,isValid:u,resetState:f}}function O(o){return k.request({method:"post",url:"/user",data:o})}const R={class:"field"},T=e("h4",null,[i(" \u7528\u6237\u540D "),e("span",{class:"text-red-500"},"*")],-1),q={class:"field-content"},z={class:"field"},$=e("h4",null,"\u90AE\u7BB1",-1),G={class:"field-content"},H={class:"field"},I=e("h4",null,[i(" \u6743\u9650 "),e("span",{class:"text-red-500"},"*")],-1),J={class:"field-content"},K={class:"flex items-center gap-6"},L={class:"flex items-center gap-2"},Q=i(" \u666E\u901A\u7528\u6237 "),W={class:"flex items-center gap-2"},X=i(" \u6E38\u5BA2 "),Y={class:"field"},Z=e("h4",null,[i(" \u5BC6\u7801 "),e("span",{class:"text-red-500"},"*")],-1),ss={class:"field-content"},es={class:"field"},ts=e("h4",null,[i(" \u786E\u8BA4\u5BC6\u7801 "),e("span",{class:"text-red-500"},"*")],-1),as={class:"field-content"},os={class:"mt-8"},ls=i("\u63D0\u4EA4"),ns={name:"UserAddView"},cs=Object.assign(ns,{setup(o){const{formState:s,confirmPassword:t,checkForm:r,isValid:u,resetState:f}=F(),c=V(),_=async h=>{if(h.preventDefault(),r(),!u.value)return;const a=p({},s);a.email===""&&delete a.email;try{await O(a),f(),c.show({message:"\u6CE8\u518C\u6210\u529F"})}catch(l){c.show({message:l.msg})}};return(h,a)=>(P(),j("div",null,[e("form",{class:"flex flex-col",onSubmit:_},[e("div",R,[T,e("div",q,[d(e("input",{class:"field-input",type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>n(s).username=l)},null,512),[[m,n(s).username]])])]),e("div",z,[$,e("div",G,[d(e("input",{class:"field-input",type:"text","onUpdate:modelValue":a[1]||(a[1]=l=>n(s).email=l)},null,512),[[m,n(s).email]])])]),e("div",H,[I,e("div",J,[e("div",K,[e("label",L,[d(e("input",{type:"radio",name:"role","onUpdate:modelValue":a[2]||(a[2]=l=>n(s).role=l),value:"user"},null,512),[[g,n(s).role]]),Q]),e("label",W,[d(e("input",{type:"radio",name:"role","onUpdate:modelValue":a[3]||(a[3]=l=>n(s).role=l),value:"tourist"},null,512),[[g,n(s).role]]),X])])])]),e("div",Y,[Z,e("div",ss,[d(e("input",{class:"field-input",type:"password","onUpdate:modelValue":a[4]||(a[4]=l=>n(s).password=l)},null,512),[[m,n(s).password]])])]),e("div",es,[ts,e("div",as,[d(e("input",{class:"field-input",type:"password","onUpdate:modelValue":a[5]||(a[5]=l=>A(t)?t.value=l:null)},null,512),[[m,n(t)]])])]),e("div",os,[B(n(N),{size:"l",class:"ml-40 w-64",onClick:_},{default:M(()=>[ls]),_:1})])],32)]))}});export{cs as default};
