var V=Object.defineProperty;var _=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var w=(o,s,t)=>s in o?V(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,h=(o,s)=>{for(var t in s||(s={}))x.call(s,t)&&w(o,t,s[t]);if(_)for(var t of _(s))y.call(s,t)&&w(o,t,s[t]);return o};import{r as N,a as k,c as S,b as e,s as u,ac as f,i as a,f as b,g as U,af as v,a7 as d,ak as B,o as M}from"./index.a364b306.js";import{a as j}from"./index.768229a8.js";import{u as g}from"./hooks.32207597.js";function C(){const o={old:"",new:"",confirmNew:""},s=N(h({},o)),t=k(!1),i=g();function r(){Object.assign(s,o)}function c(){if(t.value=!1,s.old===""){i.show({message:"\u539F\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"});return}if(s.new===""){i.show({message:"\u65B0\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"});return}if(!j(s.new)){i.show({message:"\u65B0\u5BC6\u7801\u683C\u5F0F\u4E0D\u6B63\u786E"});return}if(s.confirmNew!==s.new){i.show({message:"\u786E\u8BA4\u65B0\u5BC6\u7801\u4E0D\u4E00\u81F4"});return}t.value=!0}return{state:s,resetState:r,isValid:t,checkForm:c}}const D={class:"field"},F=e("h4",null,[d(" \u539F\u5BC6\u7801 "),e("span",{class:"text-red-500"},"*")],-1),O={class:"field-content"},P={class:"field"},T=e("h4",null,[d(" \u65B0\u5BC6\u7801 "),e("span",{class:"text-red-500"},"*")],-1),z={class:"field-content"},A={class:"field"},E=e("h4",null,[d(" \u786E\u8BA4\u65B0\u5BC6\u7801 "),e("span",{class:"text-red-500"},"*")],-1),$={class:"field-content"},q={class:"mt-8"},G=d("\u4FDD\u5B58"),H={name:"UserSecurityView",components:{MButton:v}},Q=Object.assign(H,{setup(o){const{state:s,resetState:t,isValid:i,checkForm:r}=C(),c=g(),m=async p=>{if(p.preventDefault(),r(),!!i.value)try{await B({new:s.new,old:s.old}),t(),c.show({message:"\u4FEE\u6539\u6210\u529F"})}catch(n){c.show({message:n.msg})}};return(p,n)=>(M(),S("div",null,[e("form",{onSubmit:m},[e("div",D,[F,e("div",O,[u(e("input",{class:"field-input",type:"password","onUpdate:modelValue":n[0]||(n[0]=l=>a(s).old=l)},null,512),[[f,a(s).old]])])]),e("div",P,[T,e("div",z,[u(e("input",{class:"field-input",type:"password","onUpdate:modelValue":n[1]||(n[1]=l=>a(s).new=l)},null,512),[[f,a(s).new]])])]),e("div",A,[E,e("div",$,[u(e("input",{class:"field-input",type:"password","onUpdate:modelValue":n[2]||(n[2]=l=>a(s).confirmNew=l)},null,512),[[f,a(s).confirmNew]])])]),e("div",q,[b(a(v),{size:"l",class:"ml-40 w-64",onClick:m},{default:U(()=>[G]),_:1})])],32)]))}});export{Q as default};
